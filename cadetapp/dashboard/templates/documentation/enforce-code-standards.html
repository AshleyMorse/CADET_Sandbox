{% extends 'dashboard/base.html' %}
{% block content %}
        <div class="documentation-api-container container">
            <h2> Enforce Code Standards and Quality </h2>

<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.15b.dev: http://docutils.sourceforge.net/" />
<title>Automatically Enforce Code Standards And Quality</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="automatically-enforce-code-standards-and-quality">
<h1 class="title">Automatically Enforce Code Standards And Quality</h1>

<!-- This work is licensed under a Creative Commons 3.0 Unported License.

http://creativecommons.org/licenses/by/3.0/legalcode -->
<p>Static code analysis needs to be added to the project's review process
to help with code quality and to provide a guideline for coding standards
for the team. The integration of code linting during the commit process
will help reduce the scope of code reviews thereby making them more
effective as a whole. By performing the linting automatically on every
commit, this allows the developers to focus on the substance of the
commit rather than the form and structure.</p>
<div class="section" id="problem-description">
<h1>Problem Description</h1>
<p>As multiple developers write and interact with a code base, the absence
of a unified style will lead to code that is difficult to maintain and
understand. In addition, the absence of an agreed-upon style will lead to
developers wasting time during code reviews to debate stylistic nuances
of the code rather than the content. The appropraite solution for enforcing
style guidelines is to incorporate it with the default commit process used
by the team. Since Arcanist already provides options for pre-commit hooks,
Arcanist needs to be configured to leverage third party linting tools to
enforce code standards automatically. [ArcDiffDoc]</p>
<div class="section" id="requirements">
<h2>Requirements</h2>
<blockquote>
<ul class="simple">
<li>The solution shall automatically run linting processes before a commit
can be submitted for review.</li>
<li>The solution shall be integrated with the existing <tt class="docutils literal">arc diff</tt> commit
process</li>
<li>The linters shall be properly configured to enforce coding standards
at an appropriate level</li>
<li>The linters shall have a documented configuration file explaining each
of the settings</li>
<li>The linters shall enforce documentation standards as well as code
standards</li>
<li>An installation guide shall be provided for developers to use when
configuring their development environment</li>
</ul>
</blockquote>
</div>
<div class="section" id="use-cases">
<h2>Use Cases</h2>
<p>Name: Code Linting Automatically Executed</p>
<dl class="docutils">
<dt>Actors:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Developer</dt>
<dd>Uses the static analysis tool to improve code quality</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Arcanist</dt>
<dd>Allows developer to automatically run analysis tools before
commit</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Linting Framework</dt>
<dd>Software that performs static analysis of developer's code</dd>
</dl>
</li>
</ul>
</dd>
<dt>Preconditions:</dt>
<dd><ul class="first last simple">
<li>The developer has properly installed Arcanist</li>
<li>The developer has properly installed and configured git</li>
<li>The developer has written code that needs to be comitted</li>
<li>The developer has installed the appropriate linting software</li>
</ul>
</dd>
<dt>Error Flow:</dt>
<dd>After the developer has finished writing code, the developer runs the
command <tt class="docutils literal">arc diff</tt> to kick off the process of submitting code for review.
During the diff process, Arcanist automatically executes a series of
commands to lint the developer's code before submission. The linting
process generates a series of warnings and errors due to formatting
concerns within the code. Arcanist takes these errors and presents them
to the user for correction. Arcanist stops the commit process until the
developer addresses the errors.</dd>
<dt>Post Conditions:</dt>
<dd><ul class="first last simple">
<li>The code has not been submitted</li>
<li>The developer has print out of areas where his code needs to be
refactored</li>
</ul>
</dd>
<dt>Clean Flow:</dt>
<dd>After the developer has finished writing the code, the developer runs
the command <tt class="docutils literal">arc diff</tt> to kick off the process of submitting the code for
review. During the diff process, Arcanist automatically executes a series
of commands to lint the developer's code before submission. The linting
process finds no style conflicts within the code and returns a success
value. Arcanist then allows the diff process to continue. The code is
successfully submitted for review.</dd>
<dt>Post Conditions:</dt>
<dd><ul class="first last simple">
<li>The code has been submitted</li>
<li>The developer is presented with an indication that the code did not have
any style violations</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="proposed-change">
<h1>Proposed Change</h1>
<p>Arcanist's commit process is to be reconfigured to include the use of
automatic linting processes. The linting process is to be configured to
execute Python and JavaScript linting processes.</p>
<p>The following linters shall be configured to execute automatically for
all modified Python files:</p>
<ul>
<li><p class="first">autopep8</p>
<ul class="simple">
<li>This linter shall be configured to leverage its auto correct behavior
which will immediately correct any small style concerns without
developer intervention</li>
<li>This linter shall be configured to appropriately enforce pep8 standards
as well as team designated standards without becoming burdensome</li>
</ul>
</li>
<li><p class="first">pydocstyle</p>
<blockquote>
<ul class="simple">
<li>This linter shall be configured to enforce a unified Python
documentation style.</li>
</ul>
</blockquote>
</li>
</ul>
<p>The jshint shall be configured to execute automatically for
all modified JavaScript files:</p>
<p>All linting configurations shall be properly documented to identify which
settings correspond to which desired behaviors. Configurations shall include
both error and warning settings. Autocorrect behavior shall be implemented
where available. The emphasis will be on correcting common syntax errors,
reducing cyclomatic complexity, and conforming to python standard
code behaviors, particularly those that are unique to the language</p>
<p>The automatic linting feature will work hand-in-hand with the automated
testing feature to comprise the entirety of the pre-commit documentation
and quality evaluation process. The unit testing and linting components
are already independently handled by Arcanist, so the integration process
will be seamless.</p>
<div class="section" id="alternatives">
<h2>Alternatives</h2>
<p>There are multiple third party linting options available for both Python
and JavaScript. A more thorough list of options exists in the
'awesome-static-analysis' repository on GitHub <a class="citation-reference" href="#staticanalysislist" id="id1">[StaticAnalysisList]</a>.
Autopep8, pydocstyle, and jshint were selected for their widespread
adoption and efficiency. Other options can be substituted if found to be
of superior quality, but the options selected represent a sufficient set
of static analysis tools.</p>
</div>
</div>
<div class="section" id="testing">
<h1>Testing</h1>
<p>To properly test the configurations of the linters, Arcanist's linting
command will be executed outside of the commit process to verify that the
linters are working on their own</p>
<p>To test the pre-commit hook, a poorly formatted code file will be submitted
for review in order to trigger the automatic linting process</p>
</div>
<div class="section" id="documentation">
<h1>Documentation</h1>
<p>Each configuration setting shall be accompanied by inline documentations
identifying what the specific setting addresses and why it is necessary</p>
<p>Installation instructions shall be created for distribution to the
developers to assist with the installation process</p>
</div>
<div class="section" id="implementation">
<h1>Implementation</h1>
<div class="section" id="work-items">
<h2>Work Items</h2>
<blockquote>
<ul class="simple">
<li><dl class="first docutils">
<dt>configure autopep8 linter with autocorrect</dt>
<dd><ul class="first last">
<li>Validate that autopep8 is properly configured</li>
<li>Add pre-commit check for Python files</li>
<li>Validate pre-commit check</li>
<li>Draft installation documentation and configuration notes</li>
<li>Deploy configured autopep8 to be used immediately for Data and
UI teams</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>configure pydocstyle linter</dt>
<dd><ul class="first last">
<li>Validate the pydocstyle is properly configured</li>
<li>Add pre-commit check for Python files</li>
<li>Validate pre-commit check</li>
<li>Draft installation documentation and configuration notes</li>
<li>Deploy configured pydocstyle to be used immediately for Data and
UI teams</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>configure jshint linter</dt>
<dd><ul class="first last">
<li>Validate the jshint linter is properly configured</li>
<li>Add pre-commit check for JavaScript files</li>
<li>Validate pre-commit check</li>
<li>Draft installation documentation and configuration notes</li>
<li>Deploy configured jshint to be used immediately for UI team</li>
</ul>
</dd>
</dl>
</li>
<li>consolidate documentation. Update dev tools repository as necessary</li>
</ul>
</blockquote>
</div>
</div>
<div class="section" id="references">
<h1>References</h1>
<table class="docutils citation" frame="void" id="arcdiffdoc" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[ArcDiffDoc]</td><td>Arcanist Documentation. Online:
<a class="reference external" href="https://secure.phabricator.com/book/phabricator/article/arcanist_lint/">https://secure.phabricator.com/book/phabricator/article/arcanist_lint/</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="staticanalysislist" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[StaticAnalysisList]</a></td><td>List of Static Analysis tools Online:
<a class="reference external" href="https://github.com/mre/awesome-static-analysis">https://github.com/mre/awesome-static-analysis</a></td></tr>
</tbody>
</table>
</div>
</div>
</body>
</html>


        </div>
{% endblock %}
